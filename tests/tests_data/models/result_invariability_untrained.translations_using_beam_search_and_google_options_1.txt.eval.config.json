{
  "training_config": "tests/tests_data/models/result_invariability_untrained.train.train.config",
  "trained_model": "tests/tests_data/models/result_invariability_untrained.train.model.best.npz",
  "src_fn": "tests/tests_data/src2.txt",
  "dest_fn": "tests/tests_data/models/result_invariability_untrained.translations_using_beam_search_and_google_options_1.txt",
  "method": {
    "mode": "beam_search",
    "beam_width": 30,
    "beam_pruning_margin": 1.5,
    "nb_steps": 50,
    "nb_steps_ratio": null,
    "groundhog": false,
    "force_finish": false,
    "beam_score_length_normalization": "simple",
    "beam_score_length_normalization_strength": 0.2,
    "post_score_length_normalization": "simple",
    "post_score_length_normalization_strength": 0.2,
    "post_score_coverage_penalty": "google",
    "post_score_coverage_penalty_strength": 0.4,
    "prob_space_combination": false
  },
  "beam_score_coverage_penalty": "google",
  "beam_score_coverage_penalty_strength": 0.3,
  "output": {
    "tgt_fn": null,
    "nbest_to_rescore": null,
    "ref": null,
    "tgt_unk_id": "align",
    "generate_attention_html": null,
    "rich_output_filename": null,
    "dic": null,
    "remove_unk": false,
    "normalize_unicode_unk": false,
    "attempt_to_relocate_unk_source": false
  },
  "process": {
    "gpu": null,
    "max_nb_ex": null,
    "mb_size": 80,
    "nb_batch_to_sort": 20,
    "load_model_config": null,
    "src_fn": "tests/tests_data/src2.txt",
    "dest_fn": "tests/tests_data/models/result_invariability_untrained.translations_using_beam_search_and_google_options_1.txt",
    "additional_training_config": null,
    "additional_trained_model": null,
    "reverse_training_config": null,
    "reverse_trained_model": null,
    "server": null,
    "segmenter_command": null,
    "segmenter_format": "plain",
    "description": null
  },
  "metadata": {
    "config_version_num": 1,
    "command_line": "/mnt/berry/home/frederic/knmt-fbergeron-master-2/nmt_chainer/__main__.py eval tests/tests_data/models/result_invariability_untrained.train.train.config tests/tests_data/models/result_invariability_untrained.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability_untrained.translations_using_beam_search_and_google_options_1.txt --mode beam_search --beam_width 30 --beam_pruning_margin 1.5 --beam_score_coverage_penalty google --beam_score_coverage_penalty_strength 0.3 --beam_score_length_normalization simple --post_score_coverage_penalty google --post_score_coverage_penalty_strength 0.4 --post_score_length_normalization simple",
    "knmt_version": {
      "package_version": "0.9.15",
      "git": "d6a097458679c16b9034eb8cd56de9d869a92034",
      "dirty_status": "dirty",
      "diff": "diff --git a/bin/make-result-invariability-model b/bin/make-result-invariability-model\nindex 888c19e..37d2532 100755\n--- a/bin/make-result-invariability-model\n+++ b/bin/make-result-invariability-model\n@@ -33,11 +33,20 @@ knmt eval tests/tests_data/models/result_invariability.train.train.config tests/\n \n knmt eval tests/tests_data/models/result_invariability_untrained.train.train.config tests/tests_data/models/result_invariability_untrained.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability_untrained.translations_using_beam_search.txt --mode beam_search --beam_width 30\n \n+\n knmt eval tests/tests_data/models/result_invariability.train.train.config tests/tests_data/models/result_invariability.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability.translations_using_beam_search_and_prob_space_combination.txt --mode beam_search --beam_width 30 --prob_space_combination\n \n knmt eval tests/tests_data/models/result_invariability_untrained.train.train.config tests/tests_data/models/result_invariability_untrained.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability_untrained.translations_using_beam_search_and_prob_space_combination.txt --mode beam_search --beam_width 30 --prob_space_combination\n \n \n+knmt eval tests/tests_data/models/result_invariability.train.train.config tests/tests_data/models/result_invariability.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability.translations_using_beam_search_and_google_options_1.txt --mode beam_search --beam_width 30 --beam_pruning_margin 1.5 --beam_score_coverage_penalty \"google\" --beam_score_coverage_penalty_strength 0.3 --beam_score_length_normalization \"simple\" --post_score_coverage_penalty \"google\" --post_score_coverage_penalty_strength 0.4 --post_score_length_normalization \"simple\"\n+\n+knmt eval tests/tests_data/models/result_invariability_untrained.train.train.config tests/tests_data/models/result_invariability_untrained.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability_untrained.translations_using_beam_search_and_google_options_1.txt --mode beam_search --beam_width 30 --beam_pruning_margin 1.5 --beam_score_coverage_penalty \"google\" --beam_score_coverage_penalty_strength 0.3 --beam_score_length_normalization \"simple\" --post_score_coverage_penalty \"google\" --post_score_coverage_penalty_strength 0.4 --post_score_length_normalization \"simple\"\n+\n+\n+knmt eval tests/tests_data/models/result_invariability.train.train.config tests/tests_data/models/result_invariability.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability.translations_using_beam_search_and_google_options_2.txt --mode beam_search --beam_width 30 --beam_pruning_margin 1.5 --beam_score_coverage_penalty \"google\" --beam_score_coverage_penalty_strength 0.3 --beam_score_length_normalization \"google\" --beam_score_length_normalization_strength 0.25 --post_score_coverage_penalty \"google\" --post_score_coverage_penalty_strength 0.4 --post_score_length_normalization \"google\" --post_score_length_normalization_strength 0.33\n+\n+knmt eval tests/tests_data/models/result_invariability_untrained.train.train.config tests/tests_data/models/result_invariability_untrained.train.model.best.npz tests/tests_data/src2.txt tests/tests_data/models/result_invariability_untrained.translations_using_beam_search_and_google_options_2.txt --mode beam_search --beam_width 30 --beam_pruning_margin 1.5 --beam_score_coverage_penalty \"google\" --beam_score_coverage_penalty_strength 0.3 --beam_score_length_normalization \"google\" --beam_score_length_normalization_strength 0.25 --post_score_coverage_penalty \"google\" --post_score_coverage_penalty_strength 0.4 --post_score_length_normalization \"google\" --post_score_length_normalization_strength 0.33\n \n \n # Create translations with the models using greedy search.\ndiff --git a/nmt_chainer/training_module/training_chainer.py b/nmt_chainer/training_module/training_chainer.py\nindex 5c01e67..5dac9af 100644\n--- a/nmt_chainer/training_module/training_chainer.py\n+++ b/nmt_chainer/training_module/training_chainer.py\n@@ -498,10 +498,10 @@ def train_on_data_chainer(encdec, optimizer, training_data, output_files_dict,\n         src_batch, tgt_batch, src_mask = make_batch_src_tgt(mb_raw, eos_idx=eos_idx, padding_idx=0, gpu=gpu, volatile=\"on\", need_arg_sort=False)\n \n         def s_unk_tag(num, utag):\n-            \"S_UNK_%i\" % utag\n+            return \"S_UNK_%i\" % utag\n \n         def t_unk_tag(num, utag):\n-            \"T_UNK_%i\" % utag\n+            return \"T_UNK_%i\" % utag\n \n         sample_once(encdec, src_batch, tgt_batch, src_mask, src_indexer, tgt_indexer, eos_idx,\n                     max_nb=20,\n",
      "version_from": "git call",
      "chainer": {
        "version": "1.22.0",
        "cuda": false,
        "cudnn": false,
        "cuda_version": "unavailable",
        "cudnn_version": "unavailable"
      }
    },
    "creation_time": "09:57AM March 24, 2017"
  }
}